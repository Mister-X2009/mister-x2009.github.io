<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HTML Editor</title>
<style>
  :root {
    --bg-light: #f5f5f5;
    --bg-dark: #1e1e1e;
    --text-light: #111;
    --text-dark: #eee;
    --tab-active-light: #ddd;
    --tab-active-dark: #333;
    --highlight-html: #d73a49;
    --highlight-tag: #22863a;
    --highlight-attr: #6f42c1;
    --highlight-value: #032f62;
    --highlight-js: #032f62;
    --highlight-css-prop: #d73a49;
    --highlight-css-val: #005cc5;
  }
  body {
    margin: 0;
    font-family: sans-serif;
    background: var(--bg-light);
    color: var(--text-light);
    display: flex;
    flex-direction: column;
    height: 100vh;
  }
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5em 1em;
    background: #007acc;
    color: #fff;
  }
  header button {
    background: none;
    border: none;
    color: inherit;
    cursor: pointer;
    margin-left: 1em;
    display: flex;
    align-items: center;
  }
  main {
    display: flex;
    flex-direction: column;
    flex: 1;
  }
  .tabs {
    display: flex;
    border-bottom: 1px solid #ccc;
  }
  .tab {
    padding: 0.5em 1em;
    cursor: pointer;
  }
  .tab.active {
    font-weight: bold;
    border-bottom: 2px solid #007acc;
  }
  .editor-container {
    display: flex;
    flex-direction: column;
    flex: 1;
  }
  .editor {
    flex: 1;
    padding: 1em;
    font-family: monospace;
    font-size: 14px;
    overflow: auto;
    outline: none;
    border: none;
    white-space: pre;
  }
  iframe {
    flex: 1;
    border: none;
    width: 100%;
  }
  .hidden {
    display: none;
  }
  /* Dark mode */
  body.dark {
    background: var(--bg-dark);
    color: var(--text-dark);
  }
  body.dark .tab.active {
    border-bottom: 2px solid #00dfff;
  }
  body.dark header {
    background: #005a87;
  }
  header svg {
    width: 20px;
    height: 20px;
    fill: currentColor;
    margin-right: 0.3em;
  }
  /* Syntax Highlighting */
  .html span.tag { color: var(--highlight-tag); }
  .html span.attr { color: var(--highlight-attr); }
  .html span.value { color: var(--highlight-value); }
  .html span.text { color: var(--highlight-html); }
  .css span.prop { color: var(--highlight-css-prop); }
  .css span.val { color: var(--highlight-css-val); }
  .js span { color: var(--highlight-js); }
</style>
</head>
<body>
<header>
  <div>HTML Editor</div>
  <div>
    <button id="newFile">
      <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 14H6V6h12v11z"/></svg> New
    </button>
    <button id="download">
      <svg viewBox="0 0 24 24"><path d="M5 20h14v-2H5v2zm7-18L5.33 9h3.34v4h4.66V9h3.34L12 2z"/></svg> Download
    </button>
    <button id="toggleMode">
      <svg viewBox="0 0 24 24"><path d="M12 3C10.1 3 8.21 3.45 6.57 4.28 8.36 5.37 9.78 7.04 10.6 9c0 0 0 0 0 0 1.24 3.01.49 6.44-1.99 8.92C8.5 18.67 10.2 19 12 19c4.42 0 8-3.58 8-8 0-3.31-2.02-6.15-4.88-7.25C14.06 3.03 13.03 3 12 3z"/></svg> Toggle Mode
    </button>
  </div>
</header>
<div class="tabs">
  <div class="tab active" data-tab="html">HTML</div>
  <div class="tab" data-tab="css">CSS</div>
  <div class="tab" data-tab="js">JS</div>
</div>
<div class="editor-container">
  <div id="html" class="editor html" contenteditable="true">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Example</title>
</head>
<body>
  <h1>Hello World!</h1>
</body>
</html>
  </div>
  <div id="css" class="editor css hidden">
body { font-family: sans-serif; background: #fff; color: #000; }
h1 { color: #007acc; }
  </div>
  <div id="js" class="editor js hidden">
console.log("Hello World!");
  </div>
  <iframe id="preview"></iframe>
</div>
<script>
// --- Tab switching ---
const tabs = document.querySelectorAll('.tab');
const editors = { html: document.getElementById('html'), css: document.getElementById('css'), js: document.getElementById('js') };
const preview = document.getElementById('preview');

tabs.forEach(tab => {
  tab.addEventListener('click', () => {
    tabs.forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
    Object.keys(editors).forEach(k => editors[k].classList.add('hidden'));
    editors[tab.dataset.tab].classList.remove('hidden');
  });
});

// --- Syntax Highlighting (basic) ---
function highlightHTML(code){ return code.replace(/(&lt;\/?)([a-z]+)(.*?)(\/?&gt;)/gi, (m,p1,p2,p3,p4)=>p1+'<span class="tag">'+p2+'</span>'+p3+p4); }
function highlightCSS(code){ return code.replace(/([a-z-]+)(\s*:\s*)([^;]+)(;?)/gi, (m,p1,p2,p3,p4)=>'<span class="prop">'+p1+'</span>'+p2+'<span class="val">'+p3+'</span>'+p4); }
function highlightJS(code){ return code; } // placeholder

function updateHighlight(editor, type){
  let code = editor.innerText;
  if(type==='html') code = code.replace(/</g,'&lt;').replace(/>/g,'&gt;');
  let highlighted = type==='html'?highlightHTML(code):type==='css'?highlightCSS(code):highlightJS(code);
  editor.innerHTML = highlighted;
}

// --- Preview ---
function updatePreview(){
  const html = editors.html.innerText;
  const css = `<style>${editors.css.innerText}</style>`;
  const js = `<script>${editors.js.innerText}<\/script>`;
  const blob = new Blob([html+css+js], {type:'text/html'});
  preview.src = URL.createObjectURL(blob);
}

Object.keys(editors).forEach(k=>{
  editors[k].addEventListener('input', ()=>{
    updatePreview();
    updateHighlight(editors[k], k);
  });
});

// --- New file ---
document.getElementById('newFile').addEventListener('click', ()=>{
  editors.html.innerText='<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <title>New File</title>\n</head>\n<body>\n\n</body>\n</html>';
  editors.css.innerText='';
  editors.js.innerText='';
  updatePreview();
  Object.keys(editors).forEach(k=>updateHighlight(editors[k], k));
});

// --- Toggle dark mode ---
document.getElementById('toggleMode').addEventListener('click', ()=>{
  document.body.classList.toggle('dark');
});

// --- Download ---
document.getElementById('download').addEventListener('click', ()=>{
  const choice = confirm("Press OK to embed CSS/JS into HTML.\nPress Cancel to download separate files.");
  if(choice){
    const content = editors.html.innerText+'\n<style>\n'+editors.css.innerText+'\n</style>\n<script>\n'+editors.js.innerText+'\n<\/script>';
    const a = document.createElement('a');
    const blob = new Blob([content], {type:'text/html'});
    a.href = URL.createObjectURL(blob);
    a.download = 'index.html';
    a.click();
  } else {
    // Separate files
    const htmlFile = editors.html.innerText;
    const cssFile = editors.css.innerText;
    const jsFile = editors.js.innerText;

    function downloadFile(filename, content){
      const a=document.createElement('a');
      const blob=new Blob([content], {type:'text/plain'});
      a.href=URL.createObjectURL(blob);
      a.download=filename;
      a.click();
    }
    downloadFile('index.html', htmlFile);
    downloadFile('style.css', cssFile);
    downloadFile('script.js', jsFile);
  }
});

updatePreview();
Object.keys(editors).forEach(k=>updateHighlight(editors[k], k));
</script>
</body>
</html>
