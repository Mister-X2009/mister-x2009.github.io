<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Projects</title>

<!-- Grundlegende SEO Meta-Tags -->
<meta name="description" content="My showcase page">
<meta name="keywords" content="GitHub, Apps, Programmierung, programing, code, useful">
<meta name="author" content="clown_speck">

<!-- OpenGraph (Social Media Vorschau) -->
<meta property="og:title" content="Meine Projekte">
<meta property="og:description" content="Eine Übersicht meiner Projekte aus Physik, Chemie und Programmierung">
<meta property="og:image" content="">
<meta property="og:url" content="https:\\mister-x2009.github.io">
<meta property="og:type" content="website">

<!-- Favicon -->
<link rel="icon" href="favicon.ico" type="image/x-icon">

<style>
body { font-family: Arial, sans-serif; margin: 2rem; background: #f5f5f5; }
h1 { text-align: center; }
.search { margin-bottom: 1rem; width: 100%; padding: 0.5rem; font-size: 1rem; }
.project { background: #fff; padding: 1rem; margin: 1rem 0; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);}
.project img { max-width: 150px; display: block; margin-bottom: 0.5rem;}
.project a { text-decoration: none; color: #007acc; }
</style>
</head>
<body>
<h1>Meine Projekte</h1>
<input type="text" class="search" placeholder="Suche nach Projekten..." oninput="filterProjects(this.value)">
<div id="projects"></div>

<script>
const user = 'Mister-X2009';
const repo = 'mister-x2009.github.io';
const folder = 'apps';

async function fetchProjects() {
  const container = document.getElementById('projects');

  async function fetchRecursive(path) {
    const res = await fetch(`https://api.github.com/repos/${user}/${repo}/contents/${path}`);
    const files = await res.json();
    
    for (let file of files) {
      if (file.type === 'dir') {
        await fetchRecursive(file.path);
      } else if (file.name === 'index.html') {
        const htmlRes = await fetch(file.download_url);
        const htmlText = await htmlRes.text();
        const parser = new DOMParser();
        const doc = parser.parseFromString(htmlText, 'text/html');

        const title = doc.querySelector('title')?.innerText || 'Kein Titel';
        const description = doc.querySelector('meta[name="description"]')?.content || 'Keine Beschreibung';
        const ogImage = doc.querySelector('meta[property="og:image"]')?.content || '';

        const div = document.createElement('div');
        div.className = 'project';
        div.innerHTML = `
          ${ogImage ? `<img src="${ogImage}" alt="${title}">` : ''}
          <a href="${file.html_url}" target="_blank"><h2>${title}</h2></a>
          <p>${description}</p>
        `;
        container.appendChild(div);

        // Optional: Erste Projekt-OG-Tags in Main-Page einfügen
        if (!document.querySelector('meta[property="og:image"]').content && ogImage) {
          document.querySelector('meta[property="og:title"]').content = title;
          document.querySelector('meta[property="og:description"]').content = description;
          document.querySelector('meta[property="og:image"]').content = ogImage;
        }
      }
    }
  }

  await fetchRecursive(folder);
}

function filterProjects(query) {
  const projects = document.querySelectorAll('.project');
  projects.forEach(p => {
    p.style.display = p.innerText.toLowerCase().includes(query.toLowerCase()) ? 'block' : 'none';
  });
}

fetchProjects();
</script>
</body>
</html>
